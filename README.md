# ğŸª„ Lorm â€” Mobile-First Framework for Type-Safe Apps

**Lorm** is a zero-config, full-stack mobile framework built for **Mobile Applications**. It provides instant backend APIs and database integration using [Drizzle ORM](https://orm.drizzle.team), with complete end-to-end type safety via [Zod](https://zod.dev).

> ğŸ“± Built for **React Native** and **Expo**
> âœ… Works with **any Drizzle-supported database**: PostgreSQL, MySQL, SQLite, and more

<div align="center">

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![npm version](https://badge.fury.io/js/%40lorm%2Fcli.svg)](https://badge.fury.io/js/%40lorm%2Fcli)
[![GitHub stars](https://img.shields.io/github/stars/JohnClever/lorm?style=social)](https://github.com/JohnClever/lorm)
[![GitHub forks](https://img.shields.io/github/forks/JohnClever/lorm?style=social)](https://github.com/JohnClever/lorm/fork)
[![Twitter Follow](https://img.shields.io/twitter/follow/jc_johnclever?style=social)](https://x.com/jc_johnclever)
[![Discord](https://img.shields.io/discord/1396855376221307081?color=7289da&label=Discord&logo=discord&logoColor=white)](https://discord.gg/lorm)

</div>

---

## ğŸš€ Features

### ğŸ¯ Core Framework
- ğŸ“± **Mobile-Only**: Built for React Native and Expo applications
- ğŸ¯ End-to-end **type safety** via `zod` + `orpc`
- ğŸ§ª Built on **Drizzle ORM** â€” BYO adapter (PostgreSQL, MySQL, SQLite, etc.)
- ğŸš« No backend boilerplate â€” just schema + routes
- âš¡ï¸ Blazingly fast DX for mobile development teams

### ğŸ›¡ï¸ Enterprise Security
- ğŸ”’ **Zero-Trust Input Validation**: Comprehensive sanitization and validation
- ğŸš¨ **Security Audit System**: Complete audit trails and event logging
- ğŸ›¡ï¸ **Command Injection Prevention**: Advanced protection against malicious inputs
- ğŸ” **Database Security**: URL validation and production safety checks
- âš¡ **Rate Limiting**: Intelligent command execution throttling
- ğŸ—‚ï¸ **File System Security**: Path traversal protection and safe file operations

### ğŸ”§ Advanced CLI (44+ Commands)
- ğŸ“Š **Performance Monitoring**: Built-in command execution tracking and optimization
- ğŸ” **Health Diagnostics**: Comprehensive system validation and monitoring
- ğŸ§© **Plugin System**: Extensible architecture with plugin management
- ğŸ¯ **Type Safety**: 100% TypeScript with strict mode and zero `any` types
- ğŸ“¦ **Bundle Optimization**: Ultra-lightweight packages with size monitoring
- ğŸ§¹ **Production-Ready**: Enterprise-grade build configuration and error handling

---

## ğŸ—‚ï¸ Project Structure

```
my-mobile-app/
â”œâ”€â”€ lorm.config.js         # Project settings
â”œâ”€â”€ lorm.schema.js         # Drizzle ORM schema
â”œâ”€â”€ lorm.router.js         # Your API routes
â”œâ”€â”€ .lorm/                 # Auto-generated backend code
â””â”€â”€ app/                   # Your React Native app
```

---

## âš™ï¸ 1. Configuration

```js
// lorm.config.js
export default defineConfig({
  db: {
    url: "your-db-url",
    adapter: "your-selected-adapter",
    options: "your-adapter-options"
  }
});`;
```

## ğŸ§± 1. Define Your Schema

```js
// lorm.schema.js
import { pgTable, uuid, varchar } from "@lorm/schema/pg";

export const users = pgTable("users", {
  id: uuid("id").defaultRandom().primaryKey(),
  name: varchar("name", { length: 255 })
});

export const schema = { users };
```

---

## ğŸ”§ 2. Define Your Routes

```js
// lorm.router.js
import { defineRouter } from "@lorm/core";
import { z } from "zod";
import { schema } from "./lorm.schema.js";

export const getUserById = defineRouter({
  input: z.object({ id: z.number() }),
  resolve: async ({input, db}) => {
    try {
      return db.select().from(users).where(eq(users.id, input.id));
    } catch (error) {
      throw new Error("Something went wrong in getUserById route");
    }
  }
});
```

---

## ğŸ“¡ 3. Install and Use the CLI

**First, install the CLI locally:**

```bash
# Using npm
npm install @lorm/cli --save-dev

# Using pnpm
pnpm add @lorm/cli --save-dev
```

**Then push your schema:**

```bash
npx @lorm/cli db:push (alias: `push`)
```

This will:
- Sync your schema to your database
- Generate typed API routes automatically
- Output artifacts to `.lorm/` for local use

---

## ğŸ“± 4. Use from Your Mobile App

```ts
import { createClient } from '@lorm/client';

const client = createClient();

const { data } = await client.getUserById({ id: 1 });
console.log(data);
```

Perfect for:
- âœ… **React Native** apps
- âœ… **Expo** projects
- âœ… Cross-platform mobile development

---

## ğŸ” Drizzle DB Support

You can use any database supported by [Drizzle ORM](https://orm.drizzle.team/docs/overview):

- PostgreSQL (e.g., Neon, Supabase)
- MySQL / PlanetScale
- SQLite (great for local dev)

Configure your connection in `lorm.config.js`, define tables in `lorm.schema.js`, and you're ready to go.

---

## ğŸ“ `.lorm/` Directory

This is auto-generated by the CLI â€” you donâ€™t need to touch it:

```
.lorm/
â”œâ”€â”€ schema.js           # Compiled schema types
â”œâ”€â”€ types.d.ts           # Internal type definitions
â””â”€â”€ drizzle.config.js   # Internal config for CLI + push
```

---

## ğŸš€ Enhanced CLI with 44+ Commands

The Lorm CLI provides **enterprise-grade tooling** with comprehensive type safety, performance monitoring, security features, and health diagnostics.

### ğŸ¯ Core Commands
- `npx @lorm/cli init` â€” Initialize a new Lorm project with configuration files
- `npx @lorm/cli dev` â€” Start development server with file watching and type generation
- `npx @lorm/cli check` â€” Validate schema consistency with comprehensive health diagnostics

### ğŸ—„ï¸ Database Commands (db: prefix)
- `npx @lorm/cli db:push` â€” Push schema changes directly to database (development)
- `npx @lorm/cli db:generate` â€” Generate migration files from schema changes
- `npx @lorm/cli db:migrate` â€” Apply pending database migrations
- `npx @lorm/cli db:pull` â€” Pull and introspect schema from existing database
- `npx @lorm/cli db:studio` â€” Start Drizzle Studio for database management
- `npx @lorm/cli db:up` â€” Upgrade schema to latest version
- `npx @lorm/cli db:drop` â€” Drop all tables (development only, with multi-layer security)

### ğŸ›¡ï¸ Security & Monitoring
- `npx @lorm/cli health` â€” Comprehensive system health check and diagnostics
- `npx @lorm/cli perf` â€” Performance monitoring and command execution analytics
- `npx @lorm/cli cache:stats` â€” Display cache statistics and optimization insights
- `npx @lorm/cli security:audit` â€” Security audit and vulnerability assessment
- `npx @lorm/cli security:logs` â€” View security audit logs and events

### ğŸ§© Plugin Commands
- `npx @lorm/cli plugin:list` â€” List all available and installed plugins
- `npx @lorm/cli plugin:install <name>` â€” Install a new plugin from the registry
- `npx @lorm/cli plugin:uninstall <name>` â€” Uninstall an existing plugin
- `npx @lorm/cli plugin:enable <name>` â€” Enable a disabled plugin
- `npx @lorm/cli plugin:disable <name>` â€” Disable an active plugin
- `npx @lorm/cli plugin:update [name]` â€” Update plugins to their latest versions
- `npx @lorm/cli plugin:search <query>` â€” Search for plugins in the registry

### ğŸ”’ Security Features
- **Input Validation**: All user inputs are validated and sanitized using Zod schemas
- **Rate Limiting**: Intelligent throttling prevents command abuse and system overload
- **Audit Logging**: Complete security event tracking with detailed audit trails
- **Production Safety**: Multi-layer protection for dangerous operations like `db:drop`
- **Path Security**: Advanced protection against directory traversal attacks
- **Database Security**: URL validation ensures only safe database connections

### ğŸ“š Help & Information
- `npx @lorm/cli help` â€” Show categorized help with beautiful formatting
- `npx @lorm/cli help <command>` â€” Get detailed help for specific commands
- `npx @lorm/cli --version` â€” Show CLI version

### ğŸ¯ **Type Safety & Performance Features**
- **100% Type Safety**: Zero `any` types with comprehensive TypeScript integration
- **Performance Monitoring**: Built-in command execution tracking (avg 2.71ms)
- **Health Diagnostics**: System validation and optimization recommendations
- **Error Recovery**: Graceful error handling with helpful suggestions
- **Plugin Architecture**: Extensible system for custom functionality

> ğŸ’¡ **Note**: You must first install `@lorm/cli` locally (`npm install @lorm/cli --save-dev`) before using any commands. All commands support both `npx @lorm/cli` and `pnpx @lorm/cli` for local execution only

---

## ğŸ†• Recent Updates & Improvements

### âœ… Latest Release Highlights

**ğŸ›¡ï¸ Enterprise Security Implementation**
- Zero-trust input validation with comprehensive sanitization
- Security audit system with complete event logging
- Rate limiting and abuse prevention mechanisms
- Multi-layer protection for dangerous operations
- Path traversal and command injection prevention

**ğŸ› Critical Bug Fixes**
- **Database Connection Error Handling**: Fixed false success messages when database connections fail
- **Type Safety**: Resolved TypeScript compilation issues and achieved 100% type coverage
- **Performance**: Optimized bundle sizes and improved command execution speed

**ğŸš€ Performance & Reliability**
- Enhanced error detection and reporting mechanisms
- Improved memory management and resource optimization
- Better caching systems with detailed statistics
- Production-ready error handling and recovery

**ğŸ”§ Developer Experience**
- Comprehensive health diagnostics and system monitoring
- Advanced plugin architecture with dependency resolution
- Professional CLI interface with intelligent error suggestions
- Complete audit trails for compliance and debugging

---

## ğŸ¯ Philosophy

Lorm is for mobile developers who want to build **full-stack, type-safe mobile apps fast**. Think of it as:

ğŸ§± _"tRPC + Drizzle + Supabase DX â€” but mobile-only and without the glue code"_

- ğŸ§˜â€â™€ï¸ Zero backend boilerplate
- ğŸ“± Mobile-first architecture
- ğŸ” End-to-end type safety
- âš¡ï¸ CLI-first developer flow

---

## ğŸ“¦ Packages

| Package           | Description                                    | Bundle Size |
|------------------|------------------------------------------------|-------------|
| `@lorm/cli`       | CLI for scaffold, push, and dev                | ~50KB |
| `@lorm/core`      | Server logic and procedure handling            | ~30KB |
| `@lorm/client`    | Auto-typed HTTP client for mobile apps         | ~6KB |
| `@lorm/lib`       | Shared utilities and enterprise features       | ~20KB |
| `@lorm/schema`    | Database schema abstractions and adapters      | ~15KB |

> ğŸ“Š All packages are optimized with minification, tree-shaking, and comprehensive bundle size monitoring. See [BUNDLE_SIZE.md](BUNDLE_SIZE.md) for detailed analysis.

---

## ğŸ§ª Requirements

- Node.js 18+
- A Drizzle-supported database (PostgreSQL, MySQL, SQLite, etc.)
- React Native or Expo development environment

---

## ğŸ¤ Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details on how to get started.

## ğŸ“š Documentation

- [CLI Documentation](packages/@lorm/cli/README.md) - Complete CLI command reference
- [Client Documentation](packages/@lorm/client/README.md) - Frontend integration guide
- [Bundle Size Analysis](BUNDLE_SIZE.md) - Package optimization and size monitoring
- [Contributing Guide](CONTRIBUTING.md) - Development setup and guidelines

## ğŸ”§ Performance & Optimization

- **Bundle Size Monitoring**: Comprehensive size analysis across all packages
- **Build Optimization**: Minification, tree-shaking, and code splitting enabled
- **Clean Architecture**: Professionally maintained codebase with automated cleanup
- **Enterprise Features**: Advanced caching, plugin system, and performance monitoring
- **Production Ready**: Optimized for deployment with minimal overhead

## ğŸ“„ License

Apache License - see [LICENSE](LICENSE) for details.
